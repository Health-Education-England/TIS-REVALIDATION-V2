<div class="trainee-container mat-elevation-z8"
    [ngClass]="{'large-device': (isLarge$ | async) === true || (isExtraLarge$ | async) === true}">
    <ng-container *ngIf="trainees$ | async as trainees">
        <mat-table *ngIf="sort$ | async as sort" [dataSource]="trainees" matSort matSortDisableClear
            (matSortChange)="sortTrainees($event)" [matSortActive]="sort.active" [matSortDirection]="sort.direction">

            <!-- Header row second group -->
            <ng-container matColumnDef="header-toolbar">
                <mat-header-cell *matHeaderCellDef class="tool-bar-column"
                    [ngClass]="{'large-device': (isLarge$ | async) === true || (isExtraLarge$ | async) === true}">

                    <span class="spacer" *ngIf="(isLarge$ | async) === true || (isExtraLarge$ | async) === true"></span>
                    <button mat-icon-button *ngIf="(isLarge$ | async) === false || (isExtraLarge$ | async) === false"
                        [matMenuTriggerFor]="traineeMenu" aria-label="Application status menu">
                        <mat-icon>more_vert</mat-icon>
                    </button>
                    <form class="small-wrapper" [formGroup]="searchTraineesForm" (ngSubmit)="searchSubmit()">
                        <mat-form-field class="w-100" appearance="outline">
                            <mat-label>Search</mat-label>
                            <input autocomplete="off" matInput type="search" formControlName="searchTrainees"
                                placeholder="GMC number, First or Last name">
                            <button type="submit" mat-button matSuffix mat-icon-button aria-label="Search">
                                <mat-icon>search</mat-icon>
                            </button>
                        </mat-form-field>
                    </form>

                    <button mat-icon-button *ngIf="(isLarge$ | async) === true || (isExtraLarge$ | async) === true"
                        [matMenuTriggerFor]="traineeMenu" aria-label="Application status menu">
                        <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #traineeMenu="matMenu">
                        <button mat-menu-item (click)="resetData()">
                            <mat-icon color="primary">restore_page</mat-icon>
                            <span>Reset filters</span>
                        </button>

                        <button mat-menu-item>
                            <mat-icon color="primary">supervisor_account</mat-icon>
                            <span>Allocate admin</span>
                        </button>
                    </mat-menu>
                </mat-header-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="['header-toolbar']"
                [ngClass]="{'hide':trainees.length === 0, 'mat-header-sticky large-device': (isLarge$ | async) === true || (isExtraLarge$ | async) === true}">
            </mat-header-row>


            <ng-container *ngFor="let i of columnData" matColumnDef="{{ i.label }}">
                <ng-container *ngIf="i.enableSort; else disabledSort">
                    <mat-header-cell *matHeaderCellDef [mat-sort-header]="i.name">{{
            i.label
          }}</mat-header-cell>
                </ng-container>
                <ng-template #disabledSort>
                    <mat-header-cell *matHeaderCellDef [mat-sort-header]="i.name" disabled>{{ i.label }}
                    </mat-header-cell>
                </ng-template>
                <mat-cell *matCellDef="let element">{{ element[i.name] }}</mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="columnLabels"></mat-header-row>
            <mat-row *matRowDef="let row; columns: columnLabels" (click)="traineeDetails($event, row)"
                (keyup.enter)="traineeDetails($event, row)" (keyup.space)="traineeDetails($event, row)" tabindex="0"
                role="row">
            </mat-row>

            <ng-container matColumnDef="noRecord">
                <mat-footer-cell class="centered" *matFooterCellDef><em class="icon-red">No records found.</em>
                </mat-footer-cell>
            </ng-container>

            <mat-footer-row *matFooterRowDef="['noRecord']" [ngClass]="{'hide':trainees.length > 0}">
            </mat-footer-row>

            <ng-container matColumnDef="paginatorHolder">
                <mat-footer-cell class="tool-bar-column"
                    [ngClass]="{'large-device centered': (isLarge$ | async) === true || (isExtraLarge$ | async) === true}"
                    *matFooterCellDef>
                    <mat-paginator color="primary" *ngIf="count$ | async as count" [length]="count"
                        [pageIndex]="pageNumber$ | async" [pageSize]="20" [hidePageSize]="true"
                        (page)="paginateTrainees($event)" showFirstLastButtons>
                    </mat-paginator>
                </mat-footer-cell>
            </ng-container>

            <mat-footer-row *matFooterRowDef="['paginatorHolder']">
            </mat-footer-row>

        </mat-table>
    </ng-container>


</div>